<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Dashboard - SB Admin</title>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">

    <link href="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/style.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/6.4.4/css/tempus-dominus.min.css"> -->

    <link href="css/styles.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/6.4.4/css/tempus-dominus.css" integrity="sha512-Has32s6AdZCytVnqS3BZc7JZ0PF1WJTNuPQAjGGzwrUa6i7vU9YgAyXm32qtrTP4dihoMaz/2AqPNTW9II5DOA==" crossorigin="anonymous" referrerpolicy="no-referrer" /> -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:ital,wght@0,300;0,400;0,500;0,600;1,300;1,400;1,500&display=swap" rel="stylesheet">

        <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css"> -->
        <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.7.14/css/bootstrap-datetimepicker.min.css"> -->
    <link href="plugins/global/plugins.bundle.css" rel="stylesheet" type="text/css" />

    <script src="plugins/global/plugins.bundle.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
    <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">

    <!-- <script src="plugins/global/plugins.bundle.js"></script> -->

</head>
<style>
    body{
        font-family: 'Kanit', sans-serif;

    }
    .outer {
        position: relative;
        width: 100%;
        height: 231px;
    }

    .chart_kn {
        position: absolute;
    }

    .percent {
        position: absolute;
        left: 50%;
        transform: translate(-50%, 0);
        font-size: 60px;
        bottom: 0;
    }
    .switch {
  position: relative;
  display: inline-block;
  width: 60px;
  height: 34px;
  margin-bottom: 10px;
}

.switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

.slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #ccc;
  -webkit-transition: .4s;
  transition: .4s;
  border-radius: 34px;
}

.slider:before {
  position: absolute;
  content: "";
  height: 26px;
  width: 26px;
  left: 4px;
  bottom: 4px;
  background-color: white;
  -webkit-transition: .4s;
  transition: .4s;
  border-radius: 50%;
}

input:checked + .slider {
  background-color: #f68e56;
}

input:focus + .slider {
  box-shadow: 0 0 1px #f68e56;
}

input:checked + .slider:before {
  -webkit-transform: translateX(26px);
  -ms-transform: translateX(26px);
  transform: translateX(26px);
}

.slider.round {
  border-radius: 34px;
}

.slider.round:before {
  border-radius: 50%;
}

</style>

<body class="sb-nav-fixed">
    <!-- <nav class="sb-topnav navbar navbar-expand navbar-dark bg-dark" style="background-color: #FBEDBE;"> -->
    <div class="d-flex" style="background-color: #FFA242;">

        <a href="#" class="btn ms-2" onclick="history.back()">
            <i class="fas fa-arrow-left fs-1 text-white"></i>
        </a>

        <h1 class="c_name mt-1 text-white "></h1>
        
    </div>

    <div class="d-flex flex-column justify-content-center align-items-center"  >
        <i class="fas fa-plug fa-5x mt-5 mb-2  text-dark "></i>
        <h3>สถานะอุปกรณ์ในโรงเรือน</h3>


    </div>

    <main> 
        <div class="c_card_device px-5" >
            
        </div>
        
    </main>
    <div class="modal fade" tabindex="-1" id="i_modal_time">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 class="modal-title">ตั้งเวลาเปิด-ปิด</h3>

                        <div class="btn btn-icon btn-sm btn-active-light-primary ms-2" data-bs-dismiss="modal" aria-label="Close">
                            <i class="ki-duotone ki-cross fs-1"><span class="path1"></span><span class="path2"></span></i>
                        </div>
                    </div>

                    <div class="modal-body">
                        <div class="mb-4">
                            <label for="exampleFormControlInput1" class="required form-label">ตั้งเวลา 1</label>
                            <input type="number" class="form-control form-control-solid" placeholder="" id="i_time_1"/>
                        </div>


                     
                        <div class="mb-4">
                            <label for="" class="form-label">ตั้งเวลา 2</label>
                            <input class="form-control form-control-solid" placeholder="Pick date & time" id="kt_timepicker_1"/>
                        </div>

                        <div class="mb-0">
                            <label for="" class="form-label">ตั้งเวลา 3</label>
                            <input class="form-control form-control-solid" placeholder="Pick date & time" id="kt_timepicker_7"/>
                        </div>
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-light" data-bs-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary" onclick="func_save_setting()">Save changes</button>
                    </div>
                </div>
            </div>
    </div>
    <script src="js/scripts.js"></script>
        <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js" crossorigin="anonymous"></script>
        <script src="assets/demo/chart-area-demo.js"></script>
        <script src="assets/demo/chart-bar-demo.js"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/umd/simple-datatables.min.js" crossorigin="anonymous"></script>
    <script src="js/datatables-simple-demo.js"></script>
    <!-- <script src="//jonthornton.github.io/jquery-timepicker/jquery.timepicker.js"></script> -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.15.1/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.7.14/js/bootstrap-datetimepicker.min.js"></script> -->



    
    <script>
    var result = ''     
    var data_details = []
    $(document).ready(function () {
        func_card_device() 

      $.ajax({
        url: 'http://b2ercoding.servebeer.com:5853/test',
        headers: {
          'Content-Type': 'application/x-www-form-urlencoded'
        },
        type: "GET", /* or type:"GET" or type:"PUT" */
        dataType: "json",
        data: {
        },
        success: function (data_details) {
        data_card(data_details)   
        
        },
        error: function () {
          console.log("error");
        }
      });

      
           
    })


    
//     $(function() {
    // $('#kt_timepicker_1').flatpickr();
    // $('#kt_timepicker_1').datetimepicker();
//   }); 
    // flatpickr("#kt_timepicker_1", {});


    </script>
    <script>
       $("#kt_timepicker_1").flatpickr({
        enableTime: true,
        noCalendar: true,
        dateFormat: "H:i",
        });
//     $(function() {
        $("#kt_timepicker_7").flatpickr({
            altInput: true,
            enableTime: true,
            // noCalendar: true,
            altFormat: "F j, Y H:i",
            dateFormat: "Y-m-d H:i",
            mode: "range"
        });

    </script>

    <script>
      
        


        function data_card(data_details){

            console.log("data_details", data_details);
            for (var i = 0; i < data_details.length; i++) {
            // console.log(data_card)
            // $('.c_name').html(data_card[i]['name']);

                
            
            }
       
            // $('.c_card_home').html(str_card);
          
        }

        function func_card_device(){
            var data_device = [
            {
            "id_icon_device":"1",
            "name_device":"ปั๊มน้ำ",
            "status": "true",
            "count":"2",
            "time_onOff" :"12:00",
            },
            {
            "id_icon_device":"2",
            "name_device":"ไฟ",
            "status": "false",
            "count":"10",
            "time_onOff" :"13.00",
            },
            {
            "id_icon_device":"3",
            "name_device":"พัดลม",
            "status": "false",
            "count":"10",
            "time_onOff" :"13.30",
            },
            {
            "id_icon_device":"4",
            "name_device":"Valve1",
            "status": "true",
            "count":"3",
            "time_onOff" :"14.00",
            },
            {
            "id_icon_device":"4",
            "name_device":"Valve2",
            "status": "false",
            "count":"4",
            "time_onOff" :"15.00",
            },
            ]  

            var str_card = ''
            for (var j = 0; j < data_device.length; j++) {

                if (data_device[j]['status'] == 'true'){
                    console.log(data_device[j]['status'] )
                    status_swt = 'checked'
                }else{
                    console.log(data_device[j]['status'])
                    status_swt = ''
                }


                str_card = str_card + '<div class="card shadow-sm m-lg-5 mx-2 mb-3 border-0" style="border-radius: 20px;background-color: #ffa658;">\
                <div class="card-body p-lg-5 p-2 ">\
                    <div class="d-flex w-100">\
                        <div class="d-flex w-25 justify-content-center align-items-center">\
                            <div class="">\
                                <i class="fas fa-faucet-drip text-white fa-3x "></i>\
                            </div>\
                        </div>\
                        <div class="d-flex w-50 justify-content-start">\
                            <div class="d-flex flex-column align-items-start w-100 ms-2">\
                                <span class=" " id="i_name_device" hidden>'+data_device[j]['name_device']+'</span>\
                                <h3 class=" c_name_device fa-2x me-5 text-white">'+data_device[j]['name_device']+'</h3>\
                                <div>\
                                    <i class="fas fa-clock  fa-2x text-white" onclick="func_setting_time()"></i>\
                                    <span class="fa-2x ml-2 text-white">'+data_device[j]['time_onOff']+'</span>\
                                </div>\
                            </div>\
                        </div>\
                        <div class="d-flex w-25 justify-content-center align-items-center">\
                            <div class="form-check form-switch form-switch-lg form-check-succes " hidden>\
                                <input class="form-check-input " type="checkbox" id="flexSwitchCheckChecked" checked>\
                                <label class="form-check-label" for="flexSwitchCheckChecked"></label>\
                            </div>\
                            <label class="switch">\
                                <input type="checkbox" '+ status_swt +'>\
                                <span class="slider round"></span>\
                            </label>\
                        </div>\
                    </div>\
                </div>\
            </div>'
            }
       
            $('.c_card_device').html(str_card);
        }
        

     
        
    </script>

    <script>
        function func_setting_time() {
            $('#i_modal_time').modal('show')

        }

        
    </script>

    <script>
            function func_save_setting(){
                details = {
                    "time_1": $('#i_time_1').val(),
                    "time_2" : $('#kt_timepicker_1').val(),
                    "time_3" : $('#kt_timepicker_7').val()
                 }
            
                 console.log(details)
                }

    </script>

  
</body>

</html>